<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Map Builder</title>
	<style>
		body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
		#app { display: flex; width: 100%; height: 100%; }
		
		/* Left Sidebar */
		#sidebar {
			width: 300px;
			min-width: 300px;
			background: #2c3e50;
			color: white;
			display: flex;
			flex-direction: column;
			border-right: 2px solid #1a252f;
			z-index: 10;
		}
		#sidebar-header { padding: 15px; background: #1a252f; font-weight: bold; }
		
		/* Asset Grid */
		#asset-grid {
			flex: 1;
			overflow-y: auto;
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: 5px;
			padding: 10px;
			align-content: start;
		}
		.asset-item {
			background: #34495e;
			border: 1px solid #46607a;
			cursor: pointer;
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 5px;
			border-radius: 4px;
			transition: background 0.2s;
		}
		.asset-item:hover { background: #3e5871; border-color: #2ecc71; }
		.asset-item:active { background: #27ae60; }
		
		.asset-thumb { width: 100%; height: 100px; object-fit: cover; background: #000; margin-bottom: 5px; pointer-events: none; }
		.asset-name { font-size: 10px; text-align: center; word-break: break-all; pointer-events: none; }
		
		/* Controls */
		#controls { padding: 15px; background: #1a252f; display: flex; flex-direction: column; gap: 10px; font-size: 14px; }
		.control-group { display: flex; flex-direction: column; gap: 5px; margin-bottom: 5px; }
		.control-row { display: flex; gap: 5px; align-items: center; justify-content: space-between; }
		
		button { padding: 8px; cursor: pointer; background: #27ae60; border: none; color: white; border-radius: 4px; flex: 1; }
		button:hover { background: #2ecc71; }
		button.secondary { background: #e67e22; }
		button.danger { background: #c0392b; }
		button:disabled { background: #7f8c8d; cursor: not-allowed; }
		
		input[type="text"], input[type="number"] { padding: 5px; width: 100%; box-sizing: border-box; background: #ecf0f1; border: 1px solid #bdc3c7; border-radius: 3px; }
		input[type="checkbox"] { transform: scale(1.2); }
		
		/* Right Property Panel */
		#properties-panel {
			width: 250px;
			min-width: 250px;
			background: #2c3e50;
			color: white;
			display: flex;
			flex-direction: column;
			border-left: 2px solid #1a252f;
			z-index: 10;
			padding: 10px;
			font-size: 13px;
			display: none; /* Hidden by default until object selected */
		}
		
		.prop-group { margin-bottom: 15px; border-bottom: 1px solid #34495e; padding-bottom: 10px; }
		.prop-group label { display: block; margin-bottom: 5px; color: #bdc3c7; }
		.prop-row { display: flex; gap: 5px; margin-bottom: 5px; align-items: center; }
		.prop-row span { width: 15px; text-align: center; color: #95a5a6; }
		
		#renderCanvas { flex: 1; outline: none; touch-action: none; cursor: crosshair; }
		#fileInput { display: none; }
	</style>
</head>
<body>
<div id="app">
	<!-- Left Sidebar -->
	<div id="sidebar">
		<div id="sidebar-header">Map Builder Assets</div>
		<div id="asset-grid"></div>
		<div id="controls">
			<div class="control-row">
				<button id="btnUndo" class="secondary" disabled>Undo</button>
				<button id="btnRedo" class="secondary" disabled>Redo</button>
			</div>
			
			<div class="control-group">
				<label>Snapping:</label>
				<div class="control-row">
					<label><input type="checkbox" id="chkSnapGrid" checked> Grid</label>
					<label><input type="checkbox" id="chkSnapObj"> Objects</label>
				</div>
			</div>
			
			<div class="control-group">
				<label>Grid Size:</label>
				<input type="range" id="gridSizeInput" min="1" max="20" value="5">
				<span id="gridSizeLabel">5 units</span>
			</div>
			
			<div class="control-group">
				<label>Map Name:</label>
				<input type="text" id="mapName" value="new_map">
			</div>
			
			<button id="btnSave">Save Map (JSON)</button>
			<button id="btnSaveAs" class="secondary">Save As...</button>
			<button id="btnLoad" class="secondary">Load Map</button>
			<button id="btnAddLight">Add Point Light</button>
			<input type="file" id="fileInput" accept=".json">
		</div>
	</div>
	
	<!-- Canvas -->
	<canvas id="renderCanvas"></canvas>
	
	<!-- Right Property Panel -->
	<div id="properties-panel">
		<div class="prop-group">
			<label>Name</label>
			<input type="text" id="propName">
		</div>
		
		<div class="prop-group">
			<label>Position</label>
			<div class="prop-row"><span>X</span><input type="number" id="posX" step="0.1"></div>
			<div class="prop-row"><span>Y</span><input type="number" id="posY" step="0.1"></div>
			<div class="prop-row"><span>Z</span><input type="number" id="posZ" step="0.1"></div>
		</div>
		
		<div class="prop-group">
			<label>Rotation (Degrees)</label>
			<div class="prop-row"><span>X</span><input type="number" id="rotX" step="15"></div>
			<div class="prop-row"><span>Y</span><input type="number" id="rotY" step="15"></div>
			<div class="prop-row"><span>Z</span><input type="number" id="rotZ" step="15"></div>
		</div>
		
		<div class="prop-group">
			<label>Scale</label>
			<div class="prop-row"><span>X</span><input type="number" id="scaleX" step="0.1"></div>
			<div class="prop-row"><span>Y</span><input type="number" id="scaleY" step="0.1"></div>
			<div class="prop-row"><span>Z</span><input type="number" id="scaleZ" step="0.1"></div>
		</div>
		
		<button id="btnDeleteObj" class="danger">Delete Object</button>
	</div>
</div>
</body>
</html>
